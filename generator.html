<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸°</title>
  <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.css" />
  <style>
    /* â”€â”€â”€ CSS Variables â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    :root {
      --bg:          #ffffff;
      --surface:     #f7f7f5;
      --surface-2:   #eeeeed;
      --border:      #e1e1e0;
      --accent:      #2eaadc;
      --accent-2:    #ff5c5c;
      --text:        #1a1a1a;
      --text-muted:  #6b6b6b;
      --sidebar-w:   280px;
      --header-h:    60px;
      --font-serif: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
      --font-sans:  'Pretendard', -apple-system, sans-serif;
      --font-mono:  'JetBrains Mono', monospace;
      --radius:      6px;
      --transition:  0.2s ease;
    }

    /* â”€â”€â”€ Reset & Base â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    html { scroll-behavior: smooth; }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: var(--font-sans);
      font-size: 15px;
      line-height: 1.75;
      min-height: 100vh;
    }

    /* â”€â”€â”€ Layout â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    #app-shell {
      display: grid;
      grid-template-columns: var(--sidebar-w) 1fr;
      grid-template-rows: var(--header-h) 1fr;
      min-height: 100vh;
    }

    /* â”€â”€â”€ Header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    #site-header {
      grid-column: 1 / -1;
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 0 32px;
      background: var(--surface);
      border-bottom: 1px solid var(--border);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    #header-brand {
      display: flex;
      align-items: center;
      gap: 16px;
      cursor: pointer;
    }

    .logo-mark {
      width: 30px;
      height: 30px;
      background: var(--accent);
      clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);
      flex-shrink: 0;
    }

    #site-header h1 {
      font-family: var(--font-serif);
      font-size: 1rem;
      font-weight: 600;
      letter-spacing: 0.04em;
      color: var(--text);
      margin: 0;
    }

    #site-header h1 span {
      color: var(--accent);
    }

    .version-tag {
      margin-left: auto;
      font-family: var(--font-sans);
      font-size: 0.7rem;
      color: var(--text-muted);
      border: 1px solid var(--border);
      padding: 2px 10px;
      border-radius: 20px;
    }

    /* â”€â”€â”€ Global Navigation Bar (GNB) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    #gnb-menu {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 32px;
    }

    #gnb-menu a {
      text-decoration: none;
      font-family: var(--font-sans);
      font-size: 0.95rem;
      font-weight: 500;
      color: var(--text-muted);
      padding: 8px 4px;
      border-bottom: 2px solid transparent;
      transition: color var(--transition), border-color var(--transition);
    }

    #gnb-menu a:hover {
      color: var(--text);
    }

    #gnb-menu a.active {
      color: var(--accent);
      border-bottom-color: var(--accent);
    }

    /* â”€â”€â”€ Main Content (Generator Specific) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    #main-content {
      grid-column: 1 / -1;
      display: flex;
      justify-content: center;
      height: calc(100vh - var(--header-h));
      padding: 20px;
      background-color: #fcfcfc;
    }

    /* â”€â”€â”€ Generator UI â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .generator-container {
      display: flex;
      width: 100%;
      max-width: 1400px;
      gap: 20px;
    }

    .panel {
      flex: 1;
      background: #fff;
      border: 1px solid var(--border);
      border-radius: 12px;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      box-shadow: 0 2px 10px rgba(0,0,0,0.02);
    }

    .panel-header {
      padding: 15px 20px;
      border-bottom: 1px solid var(--border);
      font-weight: bold;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .tag-main {
      background: #b9e6f8cf;
      color: #2eaadc;
      padding: 2px 8px;
      border-radius: 10px;
      font-size: 12px;
      font-weight: normal;
    }

    .panel-body {
      padding: 20px;
      display: flex;
      flex-direction: column;
      flex: 1;
    }

    .input-label {
      font-weight: bold;
      margin-bottom: 15px;
      display: block;
    }

    textarea {
      flex: 1;
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 15px;
      font-size: 14px;
      resize: none;
      outline: none;
      background: #fafafa;
      margin-bottom: 15px;
      font-family: inherit;
    }

    textarea:focus {
      border-color: #9fddf5cf;
      background: #fff;
    }

    .action-row {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .btn-optimize {
      background: #64cdf7;
      color: #fff;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      transition: var(--transition);
    }

    .btn-copy {
      background: transparent;
      color: var(--accent);
      border: 1px solid var(--accent);
      padding: 4px 12px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 12px;
      font-weight: bold;
      transition: var(--transition);
    }

    .btn-copy:hover {
      background: var(--accent);
      color: #fff;
    }

    .btn-optimize:hover {
      background: #2eaadc;
    }

    .btn-optimize:disabled {
      background: #d1d5db;
      cursor: not-allowed;
    }

    #outputArea {
      white-space: pre-wrap;
      background: #fff;
      border: none;
      overflow-y: auto;
      color: #1f2937;
      line-height: 1.6;
      font-family: inherit;
      flex: 1;
    }

    .placeholder-text {
      color: #9ca3af;
      text-align: center;
      margin-top: 50%;
      transform: translateY(-50%);
    }
  </style>
</head>
<body>

<div id="app-shell">
  <header id="site-header">
    <div id="header-brand" title="ë§¨ ìœ„ë¡œ ì´ë™">
      <div class="logo-mark" aria-hidden="true"></div>
      <h1>í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§ <span>ê°€ì´ë“œ</span></h1>
    </div>
    
    <nav id="gnb-menu">
      <a href="index.html">í™ˆ</a>
      <a href="generator.html" class="active">í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸°</a>
    </nav>

    <span class="version-tag">v1.0</span>
  </header>

  <main id="main-content">
    <div class="generator-container">
                <div class="panel">
                            <div class="panel-header">
                                <span style="color: #22c55e;">âœ¨</span> í”„ë¡¬í”„íŠ¸ ì…ë ¥
                            </div>
                            <div class="panel-body">
                <span class="input-label">ë¬´ì—‡ì„ ë§Œë“¤ê³  ì‹¶ìœ¼ì‹ ê°€ìš”?</span>
                <textarea id="userInput" placeholder="ì–´ë–¤ ìš”ì²­ì´ë“  ììœ ë¡­ê²Œ ì…ë ¥í•˜ì„¸ìš”!&#10;&#10;ì˜ˆì‹œ:&#10;ğŸ“‹ ìˆ˜ì¶œì… í†µê´€ ìë™í™” ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±í•´ì¤˜&#10;ğŸ“Š ê¸€ë¡œë²Œ ì¦ì‹œ ë¶„ì„ ëŒ€ì‹œë³´ë“œ ê¸°íší•´ì¤˜&#10;ğŸ“¦ ë¬¼ë¥˜ HS ì½”ë“œ ë¶„ë¥˜ ëª¨ë¸ ë§Œë“¤ì–´ì¤˜"></textarea>
                <div class="action-row">
                    <button id="optimizeBtn" class="btn-optimize">ìµœì í™” ì‹¤í–‰</button>
                </div>
            </div>
        </div>

        <div class="panel">
            <div class="panel-header" style="justify-content: space-between;">
                <div>
                    <span style="color: #22c55e;">ğŸ”·</span> ìµœì í™”ëœ í”„ë¡¬í”„íŠ¸
                </div>
                <button id="copyBtn" class="btn-copy" style="display: none;">ë³µì‚¬</button>
            </div>
            <div class="panel-body">
                <div id="outputArea" class="placeholder-text">ìµœì í™”ëœ í”„ë¡¬í”„íŠ¸ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.<br><span style="font-size: 12px; color: #d1d5db;">ì¢Œì¸¡ì— í”„ë¡¬í”„íŠ¸ë¥¼ ì…ë ¥í•˜ê³  ìµœì í™” ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”</span></div>
            </div>
        </div>
    </div>
  </main>
</div>

<script>
  /* í—¤ë” ë¡œê³  í´ë¦­ ì‹œ ìµœìƒë‹¨ ìŠ¤í¬ë¡¤ */
  const headerBrand = document.getElementById('header-brand');
  if (headerBrand) {
    headerBrand.addEventListener('click', () => {
      window.location.href = 'index.html';
    });
  }

    /* í”„ë¡¬í”„íŠ¸ ìµœì í™” API ì—°ë™ ë¡œì§ (Python ë°±ì—”ë“œ ê²½ìœ ) */
    // ì£¼ì˜: ì•„ë˜ URLì„ ì‹¤ì œ ë°°í¬ëœ FastAPI ì„œë²„ ì£¼ì†Œë¡œ ë³€ê²½í•˜ì‹­ì‹œì˜¤.
    const BACKEND_API_URL = "http://127.0.0.1:8000/optimize";
    const userInput = document.getElementById('userInput');
    const outputArea = document.getElementById('outputArea');
    const optimizeBtn = document.getElementById('optimizeBtn');
    const copyBtn = document.getElementById('copyBtn');

    optimizeBtn.addEventListener('click', async () => {
        const text = userInput.value.trim();
        if (!text) return;

        optimizeBtn.disabled = true;
        optimizeBtn.textContent = 'ìµœì í™” ì¤‘...';
        copyBtn.style.display = 'none';
        outputArea.classList.remove('placeholder-text');
        outputArea.textContent = 'AIê°€ í”„ë¡¬í”„íŠ¸ë¥¼ ìµœì í™”í•˜ê³  ìˆìŠµë‹ˆë‹¤...';

        try {
            const response = await fetch(BACKEND_API_URL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ text: text }) // ë°±ì—”ë“œê°€ ìš”êµ¬í•˜ëŠ” í˜•ì‹
            });

            if (!response.ok) {
                const errorData = await response.json();
                throw new Error(errorData.detail || 'ë°±ì—”ë“œ ì„œë²„ ì˜¤ë¥˜');
            }

            const data = await response.json();
            outputArea.textContent = data.optimized_prompt; // ë°±ì—”ë“œ ë°˜í™˜ í‚¤ ë§¤ì¹­
            copyBtn.style.display = 'block';

        } catch (error) {
            outputArea.textContent = `API í˜¸ì¶œ ì˜¤ë¥˜: ${error.message}\n(F12ë¥¼ ëˆŒëŸ¬ ì½˜ì†” ë„¤íŠ¸ì›Œí¬ íƒ­ì„ í™•ì¸í•˜ì‹­ì‹œì˜¤)`;
        } finally {
            optimizeBtn.disabled = false;
            optimizeBtn.textContent = 'ìµœì í™” ì‹¤í–‰';
        }
    });

    /* í”„ë¡¬í”„íŠ¸ ë³µì‚¬ ê¸°ëŠ¥ */
    copyBtn.addEventListener('click', () => {
        const textToCopy = outputArea.textContent;
        if (!textToCopy || textToCopy.includes('ìµœì í™”ëœ í”„ë¡¬í”„íŠ¸ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.')) return;

        navigator.clipboard.writeText(textToCopy).then(() => {
            const originalText = copyBtn.textContent;
            copyBtn.textContent = 'ë³µì‚¬ ì™„ë£Œ!';
            copyBtn.style.background = 'var(--accent)';
            copyBtn.style.color = '#fff';

            setTimeout(() => {
                copyBtn.textContent = originalText;
                copyBtn.style.background = 'transparent';
                copyBtn.style.color = 'var(--accent)';
            }, 2000);
        }).catch(err => {
            console.error('í´ë¦½ë³´ë“œ ë³µì‚¬ ì‹¤íŒ¨:', err);
            alert('ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        });
    });
    
</script>

</body>
</html>