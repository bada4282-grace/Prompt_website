<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>프롬프트 엔지니어링 가이드</title>
  <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.css" />
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <style>
/* ─── CSS Variables ─────────────────────────────────────────── */
    :root {
      --bg:          #ffffff;
      --surface:     #f7f7f5;
      --surface-2:   #eeeeed;
      --border:      #e1e1e0;
      --accent:      #2eaadc;
      --accent-2:    #ff5c5c;
      --text:        #1a1a1a;
      --text-muted:  #6b6b6b;
      --sidebar-w:   280px;
      --header-h:    60px;
      --font-serif: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
      --font-sans:  'Pretendard', -apple-system, sans-serif;
      --font-mono:  'JetBrains Mono', monospace;
      --radius:      6px;
      --transition:  0.2s ease;
    }

    /* ─── Reset & Base ──────────────────────────────────────────── */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    html { scroll-behavior: smooth; }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: var(--font-sans);
      font-size: 15px;
      line-height: 1.75;
      min-height: 100vh;
    }

    /* ─── Layout ────────────────────────────────────────────────── */
    #app-shell {
      display: grid;
      grid-template-columns: var(--sidebar-w) 1fr;
      grid-template-rows: var(--header-h) 1fr;
      min-height: 100vh;
    }

    /* ─── Header ────────────────────────────────────────────────── */
    #site-header {
      grid-column: 1 / -1;
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 0 32px;
      background: var(--surface);
      border-bottom: 1px solid var(--border);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    #site-header .logo-mark {
      width: 30px;
      height: 30px;
      background: var(--accent);
      clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);
      flex-shrink: 0;
    }

    #site-header h1 {
      font-family: var(--font-serif);
      font-size: 1rem;
      font-weight: 600;
      letter-spacing: 0.04em;
      color: var(--text);
    }

    #site-header h1 span {
      color: var(--accent);
    }

    #site-header .version-tag {
      margin-left: auto;
      font-family: var(--font-sans);
      font-size: 0.7rem;
      color: var(--text-muted);
      border: 1px solid var(--border);
      padding: 2px 10px;
      border-radius: 20px;
    }

    #header-brand {
      display: flex;
      align-items: center;
      gap: 16px;
      cursor: pointer;
    }

    /* ─── Sidebar ───────────────────────────────────────────────── */
    #sidebar {
      background: var(--surface);
      border-right: 1px solid var(--border);
      position: sticky;
      top: var(--header-h);
      height: calc(100vh - var(--header-h));
      overflow-y: auto;
      padding: 24px 0;
    }

    #sidebar::-webkit-scrollbar { width: 4px; }
    #sidebar::-webkit-scrollbar-track { background: transparent; }
    #sidebar::-webkit-scrollbar-thumb { background: var(--text-muted); border-radius: 4px; }

    #sidebar .nav-label {
      font-family: var(--font-sans);
      font-size: 0.90rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--text-muted);
      padding: 0 24px 10px;
    }

    #nav-list {
      list-style: none;
    }

    #nav-list li a {
      display: block;
      padding: 8px 24px;
      color: var(--text-muted);
      text-decoration: none;
      font-size: 0.82rem;
      font-family: var(--font-sans);
      font-weight: 300;
      border-left: 2px solid transparent;
      transition: color var(--transition), border-color var(--transition), background var(--transition);
      line-height: 1.4;
    }

    #nav-list li a:hover {
      color: var(--text);
      background: var(--surface-2);
    }

    #nav-list li a.active {
      color: var(--accent);
      border-left-color: var(--accent);
      background: rgba(46, 170, 220, 0.1);
    }

    /* ─── Main Content ──────────────────────────────────────────── */
    #main-content {
      padding: 48px 64px 96px;
      max-width: 820px;
    }

    /* Loading state */
    #loading-state {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 16px;
      padding: 120px 0;
      color: var(--text-muted);
    }

    .spinner {
      width: 32px;
      height: 32px;
      border: 2px solid var(--border);
      border-top-color: var(--accent);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin { to { transform: rotate(360deg); } }

    /* ─── Markdown Typography ───────────────────────────────────── */
    #md-render h1 {
      font-family: var(--font-);
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--text);
      margin: 0 0 8px;
      line-height: 1.25;
    }

    #md-render h2 {
      font-family: var(--font-serif);
      font-size: 1.75rem;
      font-weight: 600;
      color: var(--accent);
      margin: 52px 0 16px;
      padding-bottom: 10px;
      border-bottom: 1px solid var(--border);
      scroll-margin-top: calc(var(--header-h) + 16px);
    }

    #md-render h3 {
      font-family: var(--font-serif);
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--text);
      margin: 28px 0 10px;
    }

    #md-render p {
      margin: 0 0 16px;
      color: var(--text);
    }

    #md-render ul, #md-render ol {
      margin: 0 0 16px 20px;
    }

    #md-render li {
      margin-bottom: 6px;
    }

    #md-render a {
      color: var(--accent);
      text-decoration: none;
      border-bottom: 1px solid var(--accent);
      transition: border-color var(--transition);
    }

    #md-render a:hover {
      border-bottom-color: var(--text);
      color: var(--text);
    }

    #md-render strong { color: var(--text); font-weight: 600; }
    #md-render em { color: var(--text-muted); font-style: italic; }

    /* ─── Code ──────────────────────────────────────────────────── */
    #md-render code {
    font-family: var(--font-sans); /* Pretendard 적용 */
    font-weight: 600;
    font-size: 0.88em;
    color: #cf222e;                /* 가독성이 높은 짙은 레드 */
    background-color: #f6f8fa;     /* 더 깔끔한 연회색 배경 */
    padding: 2px 5px;
    border-radius: 4px;
    border: 1px solid rgba(27, 31, 36, 0.1);
    white-space: break-spaces;
    }

    #md-render pre {
      background: #2d2d2d;
      color: #f8f8f2;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 20px 24px;
      overflow-x: auto;
      margin: 0 0 20px;
      position: relative;
    }

    #md-render pre code {
      background: none;
      border: none;
      padding: 0;
      color: inherit;
      font-size: 0.85em;
      line-height: 1.6;
    }

    /* ─── Blockquote → Example Box Override ────────────────────── */
    #md-render blockquote {
      background: var(--surface-2);
      border: 1px solid var(--border);
      border-left: 3px solid var(--accent);
      border-radius: var(--radius);
      padding: 16px 20px;
      margin: 0 0 20px;
      position: relative;
    }

    #md-render blockquote::before {
      content: 'EXAMPLE';
      display: block;
      font-family: var(--font-sans);
      font-size: 0.75rem;
      font-weight: 700;
      letter-spacing: 0.1em;
      color: var(--accent);
      margin-bottom: 8px;
    }

    #md-render blockquote p {
      margin: 0;
      color: var(--text);
      font-size: 0.9rem;
    }

    #md-render blockquote code {
      background: rgba(0, 0, 0, 0.05);
      border-color: rgba(0, 0, 0, 0.1);
    }

    /* ─── Table ─────────────────────────────────────────────────── */
    #md-render table {
      width: 100%;
      border-collapse: collapse;
      margin: 0 0 20px;
      font-size: 0.88rem;
    }

    #md-render th {
      background: var(--surface-2);
      color: var(--accent);
      font-family: var(--font-sans);
      font-size: 0.90rem;
      font-weight: 700;
      letter-spacing: 0.06em;
      text-align: left;
      padding: 10px 16px;
      border: 1px solid var(--border);
    }

    #md-render td {
      padding: 10px 16px;
      border: 1px solid var(--border);
      color: var(--text);
    }

    #md-render tr:hover td {
      background: rgba(0, 0, 0, 0.03);
    }

    /* ─── HR ─────────────────────────────────────────────────────── */
    #md-render hr {
      border: none;
      border-top: 1px solid var(--border);
      margin: 40px 0;
    }

    /* ─── Fade-in animation ─────────────────────────────────────── */
    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(12px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    #md-render {
      animation: fadeUp 0.4s ease forwards;
    }

    /* ─── Responsive ─────────────────────────────────────────────── */
    @media (max-width: 768px) {
      #app-shell {
        grid-template-columns: 1fr;
        grid-template-rows: var(--header-h) auto 1fr;
      }

      #sidebar {
        position: static;
        height: auto;
        border-right: none;
        border-bottom: 1px solid var(--border);
        padding: 16px 0;
      }

      #main-content {
        padding: 28px 24px 64px;
      }
    }

    /* ─── Global Navigation Bar (GNB) ───────────────────────────── */
      #gnb-menu {
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 32px;
      }

      #gnb-menu a {
        text-decoration: none;
        font-family: var(--font-sans);
        font-size: 0.95rem;
        font-weight: 500;
        color: var(--text-muted);
        padding: 8px 4px;
        border-bottom: 2px solid transparent;
        transition: color var(--transition), border-color var(--transition);
      }

      #gnb-menu a:hover {
        color: var(--text);
      }

      #gnb-menu a.active {
        color: var(--accent);
        border-bottom-color: var(--accent);
      }
  </style>
</head>
<body>

<div id="app-shell">

  <!-- Header -->
  <header id="site-header">
    <div id="header-brand">
      <div class="logo-mark" aria-hidden="true"></div>
      <h1>프롬프트 엔지니어링 <span>가이드</span></h1>
    </div>
    <nav id="gnb-menu">
      <a href="index.html" class="active">홈</a>
      <a href="generator.html">프롬프트 생성기</a>
    </nav>
    <span class="version-tag">v1.0</span>
  </header>

  <!-- Sidebar -->
  <nav id="sidebar" aria-label="섹션 내비게이션">
    <p class="nav-label">목차</p>
    <ul id="nav-list">
      <!-- Dynamically populated by JS -->
    </ul>
  </nav>

  <!-- Main -->
  <main id="main-content">
    <div id="loading-state">
      <div class="spinner"></div>
      <span>콘텐츠 로딩 중…</span>
    </div>
    <div id="md-render" style="display:none;"></div>
  </main>

</div>

<script>
(async () => {
  /* ── 1. Custom Renderer: h2에 id 자동 주입 ────────────────── */
  const renderer = new marked.Renderer();

  renderer.heading = function ({ tokens, depth }) {
    const text = tokens.map(t => t.raw ?? t.text ?? '').join('');
    if (depth === 2) {
      const id = text
        .trim()
        .toLowerCase()
        .replace(/[^\w\sㄱ-힣]/g, '')
        .replace(/\s+/g, '-');
      return `<h2 id="${id}">${text}</h2>\n`;
    }
    return `<h${depth}>${text}</h${depth}>\n`;
  };

  marked.use({ renderer });

  /* ── 2. content.md fetch & parse ─────────────────────────── */
  const loading = document.getElementById('loading-state');
  const render  = document.getElementById('md-render');
  const navList = document.getElementById('nav-list');

  try {
    const res = await fetch('content.md');
    if (!res.ok) throw new Error(`HTTP ${res.status}`);
    const md = await res.text();

    render.innerHTML = marked.parse(md);
    loading.style.display = 'none';
    render.style.display  = 'block';

    /* ── 3. Sidebar 동적 생성 ───────────────────────────────── */
    const headings = render.querySelectorAll('h2[id]');
    navList.innerHTML = '';

    headings.forEach(h => {
      const li = document.createElement('li');
      const a  = document.createElement('a');
      a.href        = `#${h.id}`;
      a.textContent = h.textContent;
      li.appendChild(a);
      navList.appendChild(li);
    });

    /* ── 4. Scrollspy ───────────────────────────────────────── */
    const navLinks = navList.querySelectorAll('a');

    const observer = new IntersectionObserver(
      entries => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            navLinks.forEach(a => a.classList.remove('active'));
            const active = navList.querySelector(`a[href="#${entry.target.id}"]`);
            if (active) active.classList.add('active');
          }
        });
      },
      {
        rootMargin: `-${getComputedStyle(document.documentElement)
          .getPropertyValue('--header-h').trim()} 0px -70% 0px`,
        threshold: 0
      }
    );

    headings.forEach(h => observer.observe(h));

  } catch (err) {
    console.error('[fetch error]', err);
    alert('비동기 호출 실패: 로컬 서버(Live Server) 환경에서 실행하십시오');
    loading.innerHTML = '<p style="color:var(--text-muted);text-align:center">콘텐츠를 불러올 수 없습니다.</p>';
  }
})();

    const headerBrand = document.getElementById('header-brand');
    if (headerBrand) {
      headerBrand.addEventListener('click', () => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });
    }
</script>

</body>
</html>